\section{Lecture 3 --- \textit{Riesz Representation Theorem for Hilbert Spaces} --- 13th January, 2023}

\subsection{Lecture 2 continued \ldots}
Before we move onto prove the Riesz Representation Theorem, we finish the proof of Corollary \ref{cor:M-perp-perp}. It follows immediately from the following results:

\begin{proposition}[orthogonal complement of a set and the orthogonal completement of its closure are same!]
    Let $M$ be a subset of a inner product space $H$. Then $M^{\perp} =  \left( \overline{M} \right)^{\perp}$
    \label{prop:perp-and-closure-perp}
\end{proposition}
\begin{proof}
    It follows by definition that $M \subset \overline M$ and hence $\left( \overline M \right)^{\perp} \subset M^{\perp}$. Now for reverse the inclusion, let $v \in M^{\perp}$ and let $y \in \overline M$. We need to show that $\ip{v,y} = 0$. Since $y\in \overline M$ there is a sequence $\left( y_{n} \right)$ in $M$ such that $y_{n} \to y$. Since $v \in M^{\perp}$, we have that $\ip {v , y_{n}}=0 $ for all $n\in \N$. Since $\ip{v, y_{n}} \to \ip{v,y}$, we have by uniqueness of limits that $\ip{v,y} = 0$. This completes the proof.
\end{proof}

\begin{proposition}[orthogonal complement of orthogonal complement]
    Let $M$ be a closed subspace of the Hilbert space $H$. Then 
    \begin{align*}
	M = \left( M^{\perp} \right) ^{\perp}
    \end{align*}
    \label{prop:o-comp-of-o-comp}
\end{proposition}
\begin{proof}
    Let us first show that $M \subset \left( M ^{\perp} \right)^{\perp}$ (which in fact holds for any set $M$). Let $v \in M$ and $w \in M^{\perp}$. It is cleary by definition of $M^{\perp}$ that $\ip{v,w} = 0$. Hence, $v \in \left( M^{\perp} \right)^{\perp}$.

    Let us proceed to show the inclusion in the other direction. Let $v \in \left( M^{\perp} \right)^{\perp}$. Since $M$ is closed, by Theorem \ref{thm:existence-of-o-proj}, we have that $v = Pv + Qv$ where $Pv \in M$ and $Qv \in M^{\perp}$. By the previous paragraph, we have that $M \subset \left( M^{\perp} \right)^{\perp}$ and hence $Pv \in \left( M^{\perp} \right) ^{\perp}$. Hence, we have that $Qv \in \left( M^{\perp} \right)^{\perp}$. Now, $Qv \in M^{\perp} \cap \left( M^{\perp} \right) ^{\perp}$. Hence, $Qx = 0$ and thus, $v=Pv \in M$.
\end{proof}

Note that Proposition \ref{prop:perp-and-closure-perp} does not depend on $H$ being a Hilbert Space while Proposition \ref{prop:o-comp-of-o-comp} does!

Now, proof of Corollary \ref{cor:M-perp-perp} follows immediately:
\begin{proof}[Proof of Corollary \ref{cor:M-perp-perp}]
    The first part of Corollary \ref{cor:M-perp-perp} is basically Proposition \ref{prop:o-comp-of-o-comp}. Now to prove the second part, observe that
    \begin{align*}
    \left( M^{\perp} \right) ^{\perp} &= \left( \left( \overline M \right) ^{\perp} \right) ^{\perp} & \text{by Proposition } \ref{prop:perp-and-closure-perp} \\
    &= \overline{\overline{M}} & \text{by Proposition} \ref{prop:o-comp-of-o-comp} \\
    &= \overline M
    \end{align*}
\end{proof}

\subsection{Existence of closed subspaces of Hilbert Spaces}
Let $H$ be a Hilbert space of dimension at least $1$. Does there always exist a closed subspace of $H$? The answer is \textit{Yes}!

Let us proceed to prove this: Let $H$ be any Hilbert space of dimension at least one. So, there is at least one nonzero vector $v$. Let $M$ be the subspace spanned by $v$. We show that $M$ is closed. Let $\left( y_{n} \right)$ be a sequence in $M$ converging to some $x \in H$.
By definition of $M$, we have that for every $n\in \N$, $y_{n} = c_{n}v$ for some $c_n \in \mathbb F$. We claim that $c_{n}$ is a Cauchy sequence in $\mathbb F$.

To show that $\left( c_{n} \right)$ is Cauchy in $\mathbb F$, let $\varepsilon > 0$ be given. Since $\left( c_{n} v \right)$ is convergent, it is Cauchy. So there is some $N \in \N$ such that for $n,m \ge N$, we have $\norm{c_n v - c_{m} v} < \norm{v} \varepsilon$. Which is turn implies that for $n,m \ge N$, $\abs{c_{n} - c_{m}} < \varepsilon$.

Now, since $\left( c_{n} \right)$ is Cauchy in $\F$, it must converge to some $c\in F$. Now, the sequence $\left( c_{n} v \right)$ converges to $cv$ in $M$ and by the uniqueness of limits, we have that $y=cv$ and hence $y\in M$.

This argument generalises, \textit{mutatis mutandis}, and the following result holds:
\begin{theorem}
    Every finite dimensional subspace of a Hilbert space is closed.
    \label{thm:fds-are-closed}
\end{theorem}
\begin{proof}
    We do a proof by induction on the dimension of finite dimensional subspace. The base case is clear by the argument given before the statement of this theorem.

    Suppose the theorem is true for all subspaces of dimension $n$.

    Let $H$ be an inner product space and $U$ be a finite dimensional subspace of $H$ of dimension $n+1$.

    Let $v$ be a nonzero vector of $U$. Then let 
    \begin{equation*}
	v_{U}^{\perp} = v^{\perp} \cap U
    \end{equation*}
    
    It is easy to see that $U=\text{span } v \oplus v_{U}^{\perp}$. Since $v_{U}^{\perp}$ is a subspace of dimension $n$, it is closed by the induction hypothesis.

    We now proceed to show that $U$ is closed in $H$. Let $\left( u_{n} \right) $ be a sequence in $U$ converging to $x \in H$. Then for each $n \in \N$ we have that $u_{n} = c_{n} v + v_{n}$ for some $c_{n} \in F$ and some $v_{n} \in v_{U}^{\perp}$.
    Since $\left( u_{n} \right)$ is convergent, we have that $\left( u_{n} \right)$ is Cauchy. Thus, 
    \begin{equation*}
	|c_n - c_m |^2 \norm{v}^{2} + \norm{v_n - v_m}^{2} \to 0 \text { as } m,n \to \infty
    \end{equation*}
    and note that this is due to Pythagoras theorem.

    Then $\left( c_{n} \right)$ converges to $c$ and $\left( v_{n} \right)$ is Cauchy and hence converges to some $y \in H$. Since $v_{U}^{\perp}$ is closed, we have that $y \in v_{U}^{\perp} $. Thus, $u_{n}$ converges to $cv + y$ and by uniqueness of limits, we have that $x=cv+y \in U$.
\end{proof}

\begin{example}
    Consider the subspace $c_{00}$ in $\ell ^{2} \left( \N \right)$. We showed that $c_{00}$ is not complete with inner product on $\ell ^{2} \left( \N \right)$, so, it cannot be closed (because closed subspaces of a complete metric space are closed!). So, we may ask what is the closure of $c_{00}$ in $\ell ^{2} \left( \N \right)$?

    It is precisely $\ell ^{2} \left( \N \right)$. One can show this as follows:
    if $f \in \ell ^{2} \left( \N \right)$ then we may consider the sequence $\left( g_{n} \right)$ in $c_{00}$ given by
    \begin{equation*}
	g_{n} = \left( f_{1} , f_{2} , \ldots , f_{n} , 0 , 0 ,0 , \ldots \right)
    \end{equation*}
    It is easily seen that $g_{n}$ converges to $f$.
\end{example}

\begin{exercise}
    If $M$ is a subspace of a Hilbert Space $H$ then so is $\overline M$.
\end{exercise}
\subsection{Statement and Proof of Riesz Representation Theorem}
In Theorem \ref{thm:ip-linear-functional}, we saw that for any $y \in H$ where $H$ is a Hilbert space, the linear functional $L_{y} : H \to \C$ given by $x \mapsto \ip{x,y}$ is continuous. But does it happen that given a continuous linear functional $L : H \to \C$ there is a $y_{0} \in H$ such that $L = L_{y_{0}}$? Theanswer to this question is:

\begin{theorem}[Riesz Representation Theorem for Hilbert Spaces]
    Let $L : H \to \C$ be continuous linear functional. Then there exists a $y_{0} \in H$ such that $L=L_{y_{0}}$.
    \label{thm:riesz-rep-thm-for-hilbert}
\end{theorem}

But before proving Riesz Representation Theorem, let us prove that following theorem:

\begin{proposition}[necessary and sufficient condition for a subspace to be dense]
    Suppose $M$ is a subspace of a Hilbert space $V$. Then $\overline M = V$ iff $M^{\perp} = 0$.
    \label{prop:dense-nas}
\end{proposition}
\begin{proof}[Proof of Proposition \ref{prop:dense-nas}]
    First suppose $\overline M = V$. We need to show that $M^{\perp} = 0$. By \ref{prop:perp-and-closure-perp}, we have that $V^{\perp} = \left( \overline M \right)^{\perp} = M^{\perp}$. But since $V^{\perp} = \left\{ 0 \right\}$, we have that $M^{\perp} = \left\{ 0 \right\}$.

    To prove the converse, suppose that $M^{\perp} = 0$. Taking $\perp$ both sides, we have that $\overline M = 0$ by using \ref{cor:M-perp-perp}.
\end{proof}


\begin{proof}[Proof of \ref{thm:riesz-rep-thm-for-hilbert}]
    Let $L : H \to \C$ be continuous linear functional. Since $L$ is continuous, $\ker L$ is closed. Let $M:= \ker L$.

    Now, there are two possible cases: either $M^{\perp} = 0$ or $M^{\perp} \supsetneq \left\{ 0 \right\}$.

    If $M^{\perp} = \left\{ 0 \right\}$, then $M= \overline {M} = (M^{\perp})^{\perp} = \left\{ 0 \right\} ^{\perp} = H$. Hence, we have that $L = L_{0}$ and this case is done.

    Let us consider the other case where $M^{\perp} \supsetneq \left\{ 0 \right\}$. We claim that $\dim M^{\perp} = 1$. Since $M^{\perp} \supsetneq \left\{ 0 \right\}$, we may select a nonzero vector $w \in M^{\perp}$. We show that $M^{\perp} = \text{span } \left\{ w \right\}$. To do so, let $\tilde {w} \in M^{\perp}$. Consider the vector $x:= L\left( \tilde {w} \right) w - L(w) \tilde {w}$. Clearly, $L(x) = 0$. Hence $x \in M$. Since $w, \tilde{w} \in M^{\perp}$, we also have that $x \in M^{\perp}$. But then $x \in M \cap M^{\perp} = \left\{ 0 \right\}$and hence $x=0$. Thus, $L \left( \tilde w \right) w = L(w) \tilde w$. Observe that $L(w) \ne 0$ for otherwise $w \in M$ and $w \in M\cap M^{\perp}$ forcing $w = 0$. Hence $\tilde w = \left( L\left( w \right) \right)^{-1} L (\tilde w ) w$. Hence $\tilde w \in \text{span } \left\{ w \right\}$ which completes the proof of the claim.

    Let $w$ be as in previous paragraph. We have that $H = M \oplus M^{\perp} = \ker L \oplus \text{span } w$. Hence, $\left( \text{span } \left\{ w \right\} \right) ^{\perp} = (M^{\perp})^{\perp} = \overline {M} = M$. Since $\left( \text{span } \left\{ w \right\} \right) = w^{\perp}$, we have that $w^{\perp} = M$.

    Now, let $x\in H$. Now,
    \begin{equation*}
	x=\underbrace{x-\frac{\ip{x,w}w}{\norm{w}^{2}}}_{w^{\perp}=M} + \underbrace{\frac{\ip{x,w}w}{\norm{w}^{2}}}_{\in M^{\perp}}
    \end{equation*}
    Hence, we have that
    \begin{equation*}
	L(x)=\ip{x, \frac{\overline {L(w)}w}{\norm {w} ^{2}}}
    \end{equation*}

    This completes the proof!
   \end{proof}

\subsection{Projections and Orthonormal Sets in finite dimensions\ldots}
